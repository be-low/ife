<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>time-event</title>
    </head>

    <body>
        <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
        <button id="fade-btn">淡出</button>
        <script>
            document.getElementById('fade-obj').style.opacity = 1;
            document.getElementById("fade-btn").onclick = function () {
                var style = document.getElementById('fade-obj').style;
                var btn = document.getElementById("fade-btn");
                if (style.opacity > 0.5) {
                    var intervalId = setInterval(function () {
                        style.opacity = parseFloat(style.opacity) - 0.005;
                    }, 10);
                    // console.log(Date.now() + " start " + intervalId);
                    btn.disabled = true;
                    setTimeout(function () {
                        clearInterval(intervalId);
                        btn.disabled = false;
                        btn.innerHTML = "淡入";
                        // console.log(Date.now() + " clear " + intervalId);
                    }, 2000);
                } else {
                    var intervalId = setInterval(function () {
                        style.opacity = parseFloat(style.opacity) + 0.005;
                    }, 10);
                    // console.log(Date.now() + " start " + intervalId);
                    btn.disabled = true;
                    setTimeout(function () {
                        clearInterval(intervalId);
                        btn.disabled = false;
                        btn.innerHTML = "淡出";
                        // console.log(Date.now() + " clear " + intervalId);
                    }, 2000);
                }
            }
        </script>
    </body>

</html>